<!doctype html>
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
   href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
   rel="stylesheet"
   integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
   crossorigin="anonymous"
  />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" />
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="index.css" type="text/css" />
  <script src="index.js" type="text/javascript" charset="utf-8" defer></script>
  <title></title>
 </head>
 <body>
  <header class="header"></header>

  <main class="main">
   <section class="registration-container">
    <h2>Registro</h2>
    <section class="details-section">
     <form action="" class="registration-form">
      <!-- Personal Details Section -->
      <h4>Detalhes Pessoais</h4>
      <section class="personal-details">
       <div class="three-details-item">
        <label for="nome">
         <p>Nome Completo</p>
         <input type="text" name="nome" id="nome" placeholder="Informe o nome" />
        </label>
        <label for="cpf">
         <p>CPF</p>
         <input type="text" name="cpf" id="cpf" placeholder="Digite o CPF" />
        </label>
       </div>

       <div class="three-details-item">
        <label for="dataInicio">
         <p>Data Inicial</p>
         <input type="text" name="dataInicio" id="dataInicio" placeholder="Digite a data de Início" />
        </label>
        <label for="dataFinal">
         <p>Data Final</p>
         <input type="text" name="dataFinal" id="dataFinal" placeholder="Digite a data de Fim" />
        </label>
       </div>


      </section>

      <hr />

      <!-- Identity Details Section -->

      <h4>Outros Detalhes</h4>
      <section class="identity-details">
       <div class="three-details-item">
        <label for="cadastrar">
         <p>Cadastrar</p>
         <input type="text" name="cadastrar" id="cadastrar" placeholder="Pronto para cadastrar!" />
        </label>
         <p id="cadastro"></p>
         <br />
         <br />
         <br />
         <p id="cadastros"></p>
       
       </div>

      </section>
      <button id="btnEnviar" class="submit-btn">Enviar</button>
     </form>
    </section>
   </section>

   <section class="">
    <form onsubmit="return validarCPF()">
    <label for="cpf">
      <p>CPF</p>
      <input type="text" name="cpf" id="cpf" placeholder="Digite o CPF" maxlength="11" />
    </label>
    <button type="submit">Validar</button>
    <p id="resultado"></p>
  </form>

  <script>
    function validarCPF() {
      const cpfInput = document.getElementById("cpf").value;

      // Remover formatação (pontos e traços)
      const cpf = cpfInput.replace(/\D/g, "");

      // Verificar se tem 11 dígitos
      if (cpf.length !== 11) {
        mostrarResultado("CPF inválido: deve conter 11 dígitos.", false);
        return false;
      }

      // Verificar se todos os dígitos são iguais (ex.: "111.111.111-11")
      if (/^(\d)\1{10}$/.test(cpf)) {
        mostrarResultado("CPF inválido: todos os dígitos são iguais.", false);
        return false;
      }

      // Calcular os dígitos verificadores
      if (!validarDigitosVerificadores(cpf)) {
        mostrarResultado("CPF inválido: dígitos verificadores incorretos.", false);
        return false;
      }

      mostrarResultado("CPF válido!", true);
      return false; // Evita recarregar a página
    }

    function validarDigitosVerificadores(cpf) {
      // Função para calcular o dígito verificador
      const calcularDigito = (base) => {
        let soma = 0;
        for (let i = 0; i < base.length; i++) {
          soma += parseInt(base[i]) * (base.length + 1 - i);
        }
        const resto = (soma * 10) % 11;
        return resto === 10 ? 0 : resto;
      };

      // Validar primeiro dígito
      const primeiroDigito = calcularDigito(cpf.slice(0, 9));
      if (primeiroDigito !== parseInt(cpf[9])) return false;

      // Validar segundo dígito
      const segundoDigito = calcularDigito(cpf.slice(0, 10));
      if (segundoDigito !== parseInt(cpf[10])) return false;

      return true;
    }

    function mostrarResultado(mensagem, valido) {
      /*const resultado = document.getElementById("resultado");*/
      const resultado = document.getElementById("cadastros");
      resultado.textContent = mensagem;
      resultado.style.color = valido ? "green" : "red";
    }
  </script>
   </section>

   <section class=""></section>
  </main>

  <footer class="footer"></footer>

  <script
   src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
   integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
   crossorigin="anonymous"
  ></script>
  <script src="https://cdn.jsdelivr.net/npm/eruda" onload="eruda.init()"></script>
 </body>
</html>
